---
date: 0200-01-10
category: examples
layout: examples
rotation: vertical
title: Custom accessory view in a marker callout
description: Adding an accessory view to a marker callout.
tags:
  - marker
  - point
  - pin
  - callout
  - popup
  - accessory
  - button
  - disclosure
notes: Download <a href="../../files/astro-training.png">astro-training.png</a> and add it to your project.
---
@implementation MyViewController


- (void)viewDidLoad
{
    [super viewDidLoad];

    [[RMConfiguration sharedInstance] setAccessToken:@"<access token>"];

    RMMapboxSource *tileSource = [[RMMapboxSource alloc] initWithMapID:@"mapbox.emerald"];

    RMMapView *mapView = [[RMMapView alloc]
                          initWithFrame:self.view.bounds
                          andTilesource:tileSource];

    // you will need to add a <RMMapViewDelegate> to the ViewController.h file
    mapView.delegate = self;

    [self.view addSubview:mapView];

    // add marker title
    RMAnnotation *annotation = [[RMAnnotation alloc] initWithMapView:mapView
                                                          coordinate:mapView.centerCoordinate
                                                            andTitle:@"Astronaut training"];

    [mapView addAnnotation:annotation];
}

- (RMMapLayer *)mapView:(RMMapView *)mapView layerForAnnotation:(RMAnnotation *)annotation
{
    if (annotation.isUserLocationAnnotation)
        return nil;

    // add Maki icon and color the marker
    RMMarker *marker = [[RMMarker alloc]
                            initWithMapboxMarkerImage:@"rocket"
                            tintColor:[UIColor colorWithRed:.5 green:.466 blue:.733 alpha:1]];

    marker.canShowCallout = YES;

    // add callout image
    marker.leftCalloutAccessoryView = [[UIImageView alloc]
                                       initWithImage:
                                       [UIImage imageNamed:@"astro-training.png"]];

    marker.rightCalloutAccessoryView = [UIButton
                                        buttonWithType:UIButtonTypeDetailDisclosure];

    return marker;
}

// add event when callout is tapped
- (void)tapOnCalloutAccessoryControl:(UIControl *)control
                       forAnnotation:(RMAnnotation *)annotation onMap:(RMMapView *)map
{
    NSLog(@"You tapped the callout button!");
}